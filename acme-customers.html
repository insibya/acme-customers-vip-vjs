<!DOCTYPE html>
<head>
  <style>
    .VIP{
      color: ivory;
      background-color: dodgerblue;
    }
  </style>
</head>
<body>
  <div id='title'>
    Acme Customers <span class='VIP'>VIP</span>
  </div>

  <form>
    <h1>Customer Input</h1>
    Name <input type = 'text' name = "name"><br>
    Email <input type = 'text' name = "email"><br>
    Are you Special? <input type = "checkbox"><br>
    <button>Create</button> 
  </form>

  <div id='counter'>
    I can't Count!!
  </div>

  <div id='list'>
  </div>

  <script>
    const people = document.querySelector("#list")
    const count = document.querySelector("#counter")

    let customers = [
      { id: 1, name: 'moe', email: 'moe@gmail.com', isVIP: true},
      { id: 2, name: 'larry', isVIP: true, email: 'larry@gmail.com'},
      { id: 4, name: 'shep', email: 'shep@gmail.com'},
    ];


    const render = ()=>{
      let VIPnum = 0;
      const pplLoad = customers.map((person, numba) =>{
        if (person.isVIP){
          VIPnum++
          return `<div class = "VIP" id = "${person.id}">${person.name} (${person.email})<button>Annihilation</button></div>`;
        } else {
          return `<div id = "${person.id}">${person.name} (${person.email})<button>Annihilation</button></div>`;
        }
      }).join('')
      people.innerHTML = pplLoad
      count.innerHTML = `${VIPnum} VIPS`
      people.childNodes.forEach((child,i) =>{
        child.addEventListener("click", (ev)=>{
          customers = customers.filter((person) =>{ 
            return person.id !== Number(ev.target.parentNode.attributes.id.nodeValue)
          })
          render()
        })
      })
    }

    render()

  </script>
</body>